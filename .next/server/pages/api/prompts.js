"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/prompts";
exports.ids = ["pages/api/prompts"];
exports.modules = {

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fprompts&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fprompts%2Findex.js&middlewareConfigBase64=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fprompts&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fprompts%2Findex.js&middlewareConfigBase64=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_prompts_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/prompts/index.js */ \"(api)/./pages/api/prompts/index.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_prompts_index_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_prompts_index_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/prompts\",\n        pathname: \"/api/prompts\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_prompts_index_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnByb21wdHMmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRnByb21wdHMlMkZpbmRleC5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUN5RDtBQUN6RDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsd0RBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLHdEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL3Byb21wdC10ZWNobmlxdWVzLWh1Yi8/ZjdlZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXMvYXBpL3Byb21wdHMvaW5kZXguanNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9wcm9tcHRzXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcHJvbXB0c1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fprompts&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fprompts%2Findex.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/mongodb.js":
/*!************************!*\
  !*** ./lib/mongodb.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   closeDatabaseConnection: () => (/* binding */ closeDatabaseConnection),\n/* harmony export */   connectToDatabase: () => (/* binding */ connectToDatabase)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n\n// Direct MongoDB connection - no environment variables needed\nconst MONGODB_URI = \"mongodb+srv://smile463bharmal463_db_user:GNyzuCCumul8bVhB@prompttechnique.pql8lmx.mongodb.net/?retryWrites=true&w=majority&appName=promptTechnique\";\nconst MONGODB_DB = \"prompt-hub\";\n/**\n * Global is used here to maintain a cached connection across hot reloads\n * in development. This prevents connections growing exponentially\n * during API Route usage.\n */ let cached = global.mongo;\nif (!cached) {\n    cached = global.mongo = {\n        conn: null,\n        promise: null\n    };\n}\nasync function connectToDatabase() {\n    if (cached.conn) {\n        return cached.conn;\n    }\n    if (!cached.promise) {\n        const opts = {\n            // Simple options for better compatibility\n            maxPoolSize: 10,\n            serverSelectionTimeoutMS: 10000,\n            socketTimeoutMS: 45000\n        };\n        cached.promise = mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient.connect(MONGODB_URI, opts).then((client)=>{\n            return {\n                client,\n                db: client.db(MONGODB_DB)\n            };\n        }).catch((error)=>{\n            console.error(\"MongoDB connection error:\", error);\n            cached.promise = null;\n            throw error;\n        });\n    }\n    cached.conn = await cached.promise;\n    return cached.conn;\n}\n/**\n * Helper function to safely close the database connection\n * Call this when your application is shutting down\n */ async function closeDatabaseConnection() {\n    if (cached.conn) {\n        await cached.conn.client.close();\n        cached.conn = null;\n        cached.promise = null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvbW9uZ29kYi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXFDO0FBRXJDLDhEQUE4RDtBQUM5RCxNQUFNQyxjQUFjO0FBQ3BCLE1BQU1DLGFBQWE7QUFFbkI7Ozs7Q0FJQyxHQUNELElBQUlDLFNBQVNDLE9BQU9DLEtBQUs7QUFFekIsSUFBSSxDQUFDRixRQUFRO0lBQ1hBLFNBQVNDLE9BQU9DLEtBQUssR0FBRztRQUFFQyxNQUFNO1FBQU1DLFNBQVM7SUFBSztBQUN0RDtBQUVPLGVBQWVDO0lBQ3BCLElBQUlMLE9BQU9HLElBQUksRUFBRTtRQUNmLE9BQU9ILE9BQU9HLElBQUk7SUFDcEI7SUFFQSxJQUFJLENBQUNILE9BQU9JLE9BQU8sRUFBRTtRQUNuQixNQUFNRSxPQUFPO1lBQ1gsMENBQTBDO1lBQzFDQyxhQUFhO1lBQ2JDLDBCQUEwQjtZQUMxQkMsaUJBQWlCO1FBQ25CO1FBRUFULE9BQU9JLE9BQU8sR0FBR1AsZ0RBQVdBLENBQUNhLE9BQU8sQ0FBQ1osYUFBYVEsTUFBTUssSUFBSSxDQUFDLENBQUNDO1lBQzVELE9BQU87Z0JBQ0xBO2dCQUNBQyxJQUFJRCxPQUFPQyxFQUFFLENBQUNkO1lBQ2hCO1FBQ0YsR0FBR2UsS0FBSyxDQUFDLENBQUNDO1lBQ1JDLFFBQVFELEtBQUssQ0FBQyw2QkFBNkJBO1lBQzNDZixPQUFPSSxPQUFPLEdBQUc7WUFDakIsTUFBTVc7UUFDUjtJQUNGO0lBQ0FmLE9BQU9HLElBQUksR0FBRyxNQUFNSCxPQUFPSSxPQUFPO0lBQ2xDLE9BQU9KLE9BQU9HLElBQUk7QUFDcEI7QUFFQTs7O0NBR0MsR0FDTSxlQUFlYztJQUNwQixJQUFJakIsT0FBT0csSUFBSSxFQUFFO1FBQ2YsTUFBTUgsT0FBT0csSUFBSSxDQUFDUyxNQUFNLENBQUNNLEtBQUs7UUFDOUJsQixPQUFPRyxJQUFJLEdBQUc7UUFDZEgsT0FBT0ksT0FBTyxHQUFHO0lBQ25CO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcm9tcHQtdGVjaG5pcXVlcy1odWIvLi9saWIvbW9uZ29kYi5qcz9kOTIwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1vbmdvQ2xpZW50IH0gZnJvbSAnbW9uZ29kYidcblxuLy8gRGlyZWN0IE1vbmdvREIgY29ubmVjdGlvbiAtIG5vIGVudmlyb25tZW50IHZhcmlhYmxlcyBuZWVkZWRcbmNvbnN0IE1PTkdPREJfVVJJID0gJ21vbmdvZGIrc3J2Oi8vc21pbGU0NjNiaGFybWFsNDYzX2RiX3VzZXI6R055enVDQ3VtdWw4YlZoQkBwcm9tcHR0ZWNobmlxdWUucHFsOGxteC5tb25nb2RiLm5ldC8/cmV0cnlXcml0ZXM9dHJ1ZSZ3PW1ham9yaXR5JmFwcE5hbWU9cHJvbXB0VGVjaG5pcXVlJ1xuY29uc3QgTU9OR09EQl9EQiA9ICdwcm9tcHQtaHViJ1xuXG4vKipcbiAqIEdsb2JhbCBpcyB1c2VkIGhlcmUgdG8gbWFpbnRhaW4gYSBjYWNoZWQgY29ubmVjdGlvbiBhY3Jvc3MgaG90IHJlbG9hZHNcbiAqIGluIGRldmVsb3BtZW50LiBUaGlzIHByZXZlbnRzIGNvbm5lY3Rpb25zIGdyb3dpbmcgZXhwb25lbnRpYWxseVxuICogZHVyaW5nIEFQSSBSb3V0ZSB1c2FnZS5cbiAqL1xubGV0IGNhY2hlZCA9IGdsb2JhbC5tb25nb1xuXG5pZiAoIWNhY2hlZCkge1xuICBjYWNoZWQgPSBnbG9iYWwubW9uZ28gPSB7IGNvbm46IG51bGwsIHByb21pc2U6IG51bGwgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29ubmVjdFRvRGF0YWJhc2UoKSB7XG4gIGlmIChjYWNoZWQuY29ubikge1xuICAgIHJldHVybiBjYWNoZWQuY29ublxuICB9XG5cbiAgaWYgKCFjYWNoZWQucHJvbWlzZSkge1xuICAgIGNvbnN0IG9wdHMgPSB7XG4gICAgICAvLyBTaW1wbGUgb3B0aW9ucyBmb3IgYmV0dGVyIGNvbXBhdGliaWxpdHlcbiAgICAgIG1heFBvb2xTaXplOiAxMCxcbiAgICAgIHNlcnZlclNlbGVjdGlvblRpbWVvdXRNUzogMTAwMDAsXG4gICAgICBzb2NrZXRUaW1lb3V0TVM6IDQ1MDAwLFxuICAgIH1cblxuICAgIGNhY2hlZC5wcm9taXNlID0gTW9uZ29DbGllbnQuY29ubmVjdChNT05HT0RCX1VSSSwgb3B0cykudGhlbigoY2xpZW50KSA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBjbGllbnQsXG4gICAgICAgIGRiOiBjbGllbnQuZGIoTU9OR09EQl9EQiksXG4gICAgICB9XG4gICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKCdNb25nb0RCIGNvbm5lY3Rpb24gZXJyb3I6JywgZXJyb3IpXG4gICAgICBjYWNoZWQucHJvbWlzZSA9IG51bGxcbiAgICAgIHRocm93IGVycm9yXG4gICAgfSlcbiAgfVxuICBjYWNoZWQuY29ubiA9IGF3YWl0IGNhY2hlZC5wcm9taXNlXG4gIHJldHVybiBjYWNoZWQuY29ublxufVxuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBzYWZlbHkgY2xvc2UgdGhlIGRhdGFiYXNlIGNvbm5lY3Rpb25cbiAqIENhbGwgdGhpcyB3aGVuIHlvdXIgYXBwbGljYXRpb24gaXMgc2h1dHRpbmcgZG93blxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2xvc2VEYXRhYmFzZUNvbm5lY3Rpb24oKSB7XG4gIGlmIChjYWNoZWQuY29ubikge1xuICAgIGF3YWl0IGNhY2hlZC5jb25uLmNsaWVudC5jbG9zZSgpXG4gICAgY2FjaGVkLmNvbm4gPSBudWxsXG4gICAgY2FjaGVkLnByb21pc2UgPSBudWxsXG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJNb25nb0NsaWVudCIsIk1PTkdPREJfVVJJIiwiTU9OR09EQl9EQiIsImNhY2hlZCIsImdsb2JhbCIsIm1vbmdvIiwiY29ubiIsInByb21pc2UiLCJjb25uZWN0VG9EYXRhYmFzZSIsIm9wdHMiLCJtYXhQb29sU2l6ZSIsInNlcnZlclNlbGVjdGlvblRpbWVvdXRNUyIsInNvY2tldFRpbWVvdXRNUyIsImNvbm5lY3QiLCJ0aGVuIiwiY2xpZW50IiwiZGIiLCJjYXRjaCIsImVycm9yIiwiY29uc29sZSIsImNsb3NlRGF0YWJhc2VDb25uZWN0aW9uIiwiY2xvc2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/mongodb.js\n");

/***/ }),

/***/ "(api)/./pages/api/prompts/index.js":
/*!************************************!*\
  !*** ./pages/api/prompts/index.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/mongodb */ \"(api)/./lib/mongodb.js\");\n\n// Rate limiting helper (simple in-memory store for demo)\nconst rateLimitMap = new Map();\nfunction rateLimit(identifier, limit = 100, windowMs = 15 * 60 * 1000) {\n    const now = Date.now();\n    const windowStart = now - windowMs;\n    if (!rateLimitMap.has(identifier)) {\n        rateLimitMap.set(identifier, []);\n    }\n    const requests = rateLimitMap.get(identifier).filter((time)=>time > windowStart);\n    if (requests.length >= limit) {\n        return false;\n    }\n    requests.push(now);\n    rateLimitMap.set(identifier, requests);\n    return true;\n}\nasync function handler(req, res) {\n    // Set CORS headers\n    res.setHeader(\"Access-Control-Allow-Origin\", \"*\");\n    res.setHeader(\"Access-Control-Allow-Methods\", \"GET, POST, OPTIONS\");\n    res.setHeader(\"Access-Control-Allow-Headers\", \"Content-Type, Authorization\");\n    if (req.method === \"OPTIONS\") {\n        return res.status(200).end();\n    }\n    // Rate limiting\n    const clientIP = req.headers[\"x-forwarded-for\"] || req.connection.remoteAddress;\n    if (!rateLimit(clientIP)) {\n        return res.status(429).json({\n            error: \"Too many requests\"\n        });\n    }\n    try {\n        const { db } = await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_0__.connectToDatabase)();\n        if (req.method === \"GET\") {\n            const { category, q: searchQuery, limit = 50 } = req.query;\n            // Build filter object\n            const filter = {};\n            if (category && category !== \"All\") {\n                filter.category = category;\n            }\n            if (searchQuery) {\n                // Sanitize search query to prevent injection\n                const sanitizedQuery = searchQuery.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n                filter.$or = [\n                    {\n                        title: {\n                            $regex: sanitizedQuery,\n                            $options: \"i\"\n                        }\n                    },\n                    {\n                        description: {\n                            $regex: sanitizedQuery,\n                            $options: \"i\"\n                        }\n                    },\n                    {\n                        tags: {\n                            $in: [\n                                new RegExp(sanitizedQuery, \"i\")\n                            ]\n                        }\n                    }\n                ];\n            }\n            const prompts = await db.collection(\"prompts\").find(filter).sort({\n                createdAt: -1\n            }).limit(parseInt(limit)).toArray();\n            // Set cache headers for better performance\n            res.setHeader(\"Cache-Control\", \"public, max-age=300, s-maxage=300, stale-while-revalidate=60\");\n            return res.status(200).json(prompts);\n        }\n        if (req.method === \"POST\") {\n            // Check for API key\n            const apiKey = req.headers.authorization?.replace(\"Bearer \", \"\");\n            if (apiKey !== process.env.API_KEY) {\n                return res.status(401).json({\n                    error: \"Unauthorized\"\n                });\n            }\n            const { title, category, tags, description, prompt, exampleInput, exampleOutput } = req.body;\n            // Validate required fields\n            if (!title || !category || !description || !prompt) {\n                return res.status(400).json({\n                    error: \"Missing required fields\"\n                });\n            }\n            const newPrompt = {\n                title,\n                category,\n                tags: tags || [],\n                description,\n                prompt,\n                exampleInput: exampleInput || \"\",\n                exampleOutput: exampleOutput || \"\",\n                createdAt: new Date(),\n                updatedAt: new Date()\n            };\n            const result = await db.collection(\"prompts\").insertOne(newPrompt);\n            return res.status(201).json({\n                success: true,\n                id: result.insertedId,\n                prompt: {\n                    ...newPrompt,\n                    _id: result.insertedId\n                }\n            });\n        }\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    } catch (error) {\n        console.error(\"API Error:\", error);\n        return res.status(500).json({\n            error: \"Internal server error\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU87UUFBd0I7SUFDL0Q7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3Byb21wdC10ZWNobmlxdWVzLWh1Yi8uL3BhZ2VzL2FwaS9wcm9tcHRzL2luZGV4LmpzPzRhNGMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29ubmVjdFRvRGF0YWJhc2UgfSBmcm9tICcuLi8uLi8uLi9saWIvbW9uZ29kYidcblxuLy8gUmF0ZSBsaW1pdGluZyBoZWxwZXIgKHNpbXBsZSBpbi1tZW1vcnkgc3RvcmUgZm9yIGRlbW8pXG5jb25zdCByYXRlTGltaXRNYXAgPSBuZXcgTWFwKClcblxuZnVuY3Rpb24gcmF0ZUxpbWl0KGlkZW50aWZpZXIsIGxpbWl0ID0gMTAwLCB3aW5kb3dNcyA9IDE1ICogNjAgKiAxMDAwKSB7XG4gIGNvbnN0IG5vdyA9IERhdGUubm93KClcbiAgY29uc3Qgd2luZG93U3RhcnQgPSBub3cgLSB3aW5kb3dNc1xuICBcbiAgaWYgKCFyYXRlTGltaXRNYXAuaGFzKGlkZW50aWZpZXIpKSB7XG4gICAgcmF0ZUxpbWl0TWFwLnNldChpZGVudGlmaWVyLCBbXSlcbiAgfVxuICBcbiAgY29uc3QgcmVxdWVzdHMgPSByYXRlTGltaXRNYXAuZ2V0KGlkZW50aWZpZXIpLmZpbHRlcih0aW1lID0+IHRpbWUgPiB3aW5kb3dTdGFydClcbiAgXG4gIGlmIChyZXF1ZXN0cy5sZW5ndGggPj0gbGltaXQpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICBcbiAgcmVxdWVzdHMucHVzaChub3cpXG4gIHJhdGVMaW1pdE1hcC5zZXQoaWRlbnRpZmllciwgcmVxdWVzdHMpXG4gIHJldHVybiB0cnVlXG59XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcbiAgLy8gU2V0IENPUlMgaGVhZGVyc1xuICByZXMuc2V0SGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nLCAnKicpXG4gIHJlcy5zZXRIZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnLCAnR0VULCBQT1NULCBPUFRJT05TJylcbiAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycycsICdDb250ZW50LVR5cGUsIEF1dGhvcml6YXRpb24nKVxuXG4gIGlmIChyZXEubWV0aG9kID09PSAnT1BUSU9OUycpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmVuZCgpXG4gIH1cblxuICAvLyBSYXRlIGxpbWl0aW5nXG4gIGNvbnN0IGNsaWVudElQID0gcmVxLmhlYWRlcnNbJ3gtZm9yd2FyZGVkLWZvciddIHx8IHJlcS5jb25uZWN0aW9uLnJlbW90ZUFkZHJlc3NcbiAgaWYgKCFyYXRlTGltaXQoY2xpZW50SVApKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDI5KS5qc29uKHsgZXJyb3I6ICdUb28gbWFueSByZXF1ZXN0cycgfSlcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgeyBkYiB9ID0gYXdhaXQgY29ubmVjdFRvRGF0YWJhc2UoKVxuXG4gICAgaWYgKHJlcS5tZXRob2QgPT09ICdHRVQnKSB7XG4gICAgICBjb25zdCB7IGNhdGVnb3J5LCBxOiBzZWFyY2hRdWVyeSwgbGltaXQgPSA1MCB9ID0gcmVxLnF1ZXJ5XG4gICAgICBcbiAgICAgIC8vIEJ1aWxkIGZpbHRlciBvYmplY3RcbiAgICAgIGNvbnN0IGZpbHRlciA9IHt9XG4gICAgICBpZiAoY2F0ZWdvcnkgJiYgY2F0ZWdvcnkgIT09ICdBbGwnKSB7XG4gICAgICAgIGZpbHRlci5jYXRlZ29yeSA9IGNhdGVnb3J5XG4gICAgICB9XG4gICAgICBpZiAoc2VhcmNoUXVlcnkpIHtcbiAgICAgICAgLy8gU2FuaXRpemUgc2VhcmNoIHF1ZXJ5IHRvIHByZXZlbnQgaW5qZWN0aW9uXG4gICAgICAgIGNvbnN0IHNhbml0aXplZFF1ZXJ5ID0gc2VhcmNoUXVlcnkucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2csICdcXFxcJCYnKVxuICAgICAgICBmaWx0ZXIuJG9yID0gW1xuICAgICAgICAgIHsgdGl0bGU6IHsgJHJlZ2V4OiBzYW5pdGl6ZWRRdWVyeSwgJG9wdGlvbnM6ICdpJyB9IH0sXG4gICAgICAgICAgeyBkZXNjcmlwdGlvbjogeyAkcmVnZXg6IHNhbml0aXplZFF1ZXJ5LCAkb3B0aW9uczogJ2knIH0gfSxcbiAgICAgICAgICB7IHRhZ3M6IHsgJGluOiBbbmV3IFJlZ0V4cChzYW5pdGl6ZWRRdWVyeSwgJ2knKV0gfSB9XG4gICAgICAgIF1cbiAgICAgIH1cblxuICAgICAgY29uc3QgcHJvbXB0cyA9IGF3YWl0IGRiXG4gICAgICAgIC5jb2xsZWN0aW9uKCdwcm9tcHRzJylcbiAgICAgICAgLmZpbmQoZmlsdGVyKVxuICAgICAgICAuc29ydCh7IGNyZWF0ZWRBdDogLTEgfSlcbiAgICAgICAgLmxpbWl0KHBhcnNlSW50KGxpbWl0KSlcbiAgICAgICAgLnRvQXJyYXkoKVxuXG4gICAgICAvLyBTZXQgY2FjaGUgaGVhZGVycyBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlXG4gICAgICByZXMuc2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJywgJ3B1YmxpYywgbWF4LWFnZT0zMDAsIHMtbWF4YWdlPTMwMCwgc3RhbGUtd2hpbGUtcmV2YWxpZGF0ZT02MCcpXG4gICAgICBcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihwcm9tcHRzKVxuICAgIH1cblxuICAgIGlmIChyZXEubWV0aG9kID09PSAnUE9TVCcpIHtcbiAgICAgIC8vIENoZWNrIGZvciBBUEkga2V5XG4gICAgICBjb25zdCBhcGlLZXkgPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uPy5yZXBsYWNlKCdCZWFyZXIgJywgJycpXG4gICAgICBpZiAoYXBpS2V5ICE9PSBwcm9jZXNzLmVudi5BUElfS0VZKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9KVxuICAgICAgfVxuXG4gICAgICBjb25zdCB7IHRpdGxlLCBjYXRlZ29yeSwgdGFncywgZGVzY3JpcHRpb24sIHByb21wdCwgZXhhbXBsZUlucHV0LCBleGFtcGxlT3V0cHV0IH0gPSByZXEuYm9keVxuXG4gICAgICAvLyBWYWxpZGF0ZSByZXF1aXJlZCBmaWVsZHNcbiAgICAgIGlmICghdGl0bGUgfHwgIWNhdGVnb3J5IHx8ICFkZXNjcmlwdGlvbiB8fCAhcHJvbXB0KSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTWlzc2luZyByZXF1aXJlZCBmaWVsZHMnIH0pXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG5ld1Byb21wdCA9IHtcbiAgICAgICAgdGl0bGUsXG4gICAgICAgIGNhdGVnb3J5LFxuICAgICAgICB0YWdzOiB0YWdzIHx8IFtdLFxuICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgcHJvbXB0LFxuICAgICAgICBleGFtcGxlSW5wdXQ6IGV4YW1wbGVJbnB1dCB8fCAnJyxcbiAgICAgICAgZXhhbXBsZU91dHB1dDogZXhhbXBsZU91dHB1dCB8fCAnJyxcbiAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKClcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuY29sbGVjdGlvbigncHJvbXB0cycpLmluc2VydE9uZShuZXdQcm9tcHQpXG4gICAgICBcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMSkuanNvbih7IFxuICAgICAgICBzdWNjZXNzOiB0cnVlLCBcbiAgICAgICAgaWQ6IHJlc3VsdC5pbnNlcnRlZElkLFxuICAgICAgICBwcm9tcHQ6IHsgLi4ubmV3UHJvbXB0LCBfaWQ6IHJlc3VsdC5pbnNlcnRlZElkIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignQVBJIEVycm9yOicsIGVycm9yKVxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9KVxuICB9XG59XG4iXSwibmFtZXMiOlsiY29ubmVjdFRvRGF0YWJhc2UiLCJyYXRlTGltaXRNYXAiLCJNYXAiLCJyYXRlTGltaXQiLCJpZGVudGlmaWVyIiwibGltaXQiLCJ3aW5kb3dNcyIsIm5vdyIsIkRhdGUiLCJ3aW5kb3dTdGFydCIsImhhcyIsInNldCIsInJlcXVlc3RzIiwiZ2V0IiwiZmlsdGVyIiwidGltZSIsImxlbmd0aCIsInB1c2giLCJoYW5kbGVyIiwicmVxIiwicmVzIiwic2V0SGVhZGVyIiwibWV0aG9kIiwic3RhdHVzIiwiZW5kIiwiY2xpZW50SVAiLCJoZWFkZXJzIiwiY29ubmVjdGlvbiIsInJlbW90ZUFkZHJlc3MiLCJqc29uIiwiZXJyb3IiLCJkYiIsImNhdGVnb3J5IiwicSIsInNlYXJjaFF1ZXJ5IiwicXVlcnkiLCJzYW5pdGl6ZWRRdWVyeSIsInJlcGxhY2UiLCIkb3IiLCJ0aXRsZSIsIiRyZWdleCIsIiRvcHRpb25zIiwiZGVzY3JpcHRpb24iLCJ0YWdzIiwiJGluIiwiUmVnRXhwIiwicHJvbXB0cyIsImNvbGxlY3Rpb24iLCJmaW5kIiwic29ydCIsImNyZWF0ZWRBdCIsInBhcnNlSW50IiwidG9BcnJheSIsImFwaUtleSIsImF1dGhvcml6YXRpb24iLCJwcm9jZXNzIiwiZW52IiwiQVBJX0tFWSIsInByb21wdCIsImV4YW1wbGVJbnB1dCIsImV4YW1wbGVPdXRwdXQiLCJib2R5IiwibmV3UHJvbXB0IiwidXBkYXRlZEF0IiwicmVzdWx0IiwiaW5zZXJ0T25lIiwic3VjY2VzcyIsImlkIiwiaW5zZXJ0ZWRJZCIsIl9pZCIsImNvbnNvbGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/prompts/index.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fprompts&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fprompts%2Findex.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();